@model LogViewModel
@{
    ViewData["Title"] = "Log";
}


<h1>Conversion Logs</h1>

<form method="get" asp-action="Index" asp-controller="ConversionLog">
    <label for="period">Show logs from:</label>
    <select id="period" name="period" onchange="this.form.submit()" class="form-select w-auto d-inline-block ms-2">
        <option value="24h" selected="@(Model.Period == "24h" ? "selected" : null)">Last 24 hours</option>
        <option value="7d" selected="@(Model.Period == "7d" ? "selected" : null)">Last 7 days</option>
        <option value="30d" selected="@(Model.Period == "30d" ? "selected" : null)">Last 30 days</option>
        <option value="1y" selected="@(Model.Period == "1y" ? "selected" : null)">Last 1 year</option>
        <option value="all" selected="@(Model.Period == "all" ? "selected" : null)">All logs</option>
    </select>
</form>

<div class="table-responsive">
    <table class="table table-striped table-bordered mt-3">
        <thead class="table-light">
            <tr>
                <th>Timestamp (UTC)</th>
                <th>Format</th>
                <th>Width</th>
                <th>Height</th>
                <th>Processing Time (ms)</th>
                <th>Output Length</th>
                <th>Characters</th>
                <th>Font</th>
                <th>Background</th>
                <th>Scale</th>
                <th>Invert</th>
                <th>Operating System</th>
            </tr>
        </thead>
        <tbody>
            @if (Model.Logs == null || !Model.Logs.Any())
            {
                <tr>
                    <td colspan="12" class="text-center">No logs found for the selected period.</td>
                </tr>
            }
            else
            {
                foreach (var log in Model.Logs)
                {
                    <tr>
                        <td>@(log.Activity?.Timestamp.ToString("yyyy-MM-dd HH:mm:ss") ?? "no data")</td>
                        <td>@(log.Activity?.Format ?? "no data")</td>
                        <td>@(log.Activity?.Width.ToString() ?? "no data")</td>
                        <td>@(log.Activity?.Height.ToString() ?? "no data")</td>
                        <td>@(log.Activity?.ProcessingTimeMs.ToString() ?? "no data")</td>
                        <td>@(log.Activity?.OutputLengthBytes.ToString() ?? "no data")</td>
                        <td>@(log.Parameters?.Characters ?? "no data")</td>
                        <td>@(log.Parameters?.Font ?? "no data")</td>
                        <td>@(string.IsNullOrWhiteSpace(log.Parameters?.Background) ? "no data" : log.Parameters!.Background)</td>
                        <td>@(log.Parameters?.Scale.ToString() ?? "no data")</td>
                        <td>@(log.Parameters != null ? (log.Parameters.Invert ? "Yes" : "No") : "no data")</td>
                        <td>@(log.Parameters?.Platform ?? "no data")</td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>